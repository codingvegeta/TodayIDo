# AOP 프로그래밍

---
## 1 프록시와 AOP

---
* 핵심 기능의 실행은 다른 객체에 위임하고 부가적인 기능을 제공하는 객체를 프록시
라고 부른다.
* 실제 핵심 기능을 실행하는 객체는 대상 객체라고 부른다.
* 프록시의 특징은 핵심 기능은 구현하지 않는다는 점이다.
* 공통 기능 구현과 핵심 기능 구현을 분리하는 것이 AOP의 핵심이다.

### 1.1 AOP

---
* AOP는 Aspect Oriented Programming의 약자로, 여러 객체에 공통으로 적용할
수 있는 기능을 분리해서 재사용성을 높여주는 프로그래밍 기법이다.
* AOP는 핵심 기능과 공통 기능의 구현을 분리함으로써 핵심 기능을 구현한 코드의
수정 없이 공통 기능을 적용 할 수 있게 만들어준다.
* AOP의 기본 개념은 핵심 기능에 공통 기능을 삽입하는 것이다.
* 핵심 기능에 공통 기능을 삽입하는 방법에는 세가지가 있다.
  1. 컴파일 시점에 코드에 공통 기능을 삽입하는 방법
     * AOP 개발 도구가 소스 코드를 컴파일 하기 전에 공통 구현 코드를 소스에 삽입하는
     방식으로 동작한다.
  2. 클래스 로딩 시점에 바이트 코드에 공통 기능을 삽입하는 방법
     * 클래스를 로딩할 때 바이트 코드에 공통 기능을 클래스에 삽입하는 방식으로 
     동작한다.
  3. 런타임에 프로시 객체를 생성해서 공통 기능을 삽입하는 방법
     * 스프링이 제공하는 AOP 방식이다.

## 2 스프링 AOP 구현

---
* 스프링 AOP를 이용해서 공통 기능을 구현하고 적용하는 방법은 단순하다.
  * Aspect로 사용할 클래스에 @Aspect 애노테이션을 붙인다.
  * @Pointcut 애노테이션으로 공통 기능을 적용할 Pointcut을 정의한다.
  * 공통 기능을 구현한 메서드에 @Around 애노테이션을 적용한다.

### 2.1 @Aspect, @Pointcut, @Around 를 이용한 AOP 구현

---
* 개발자는 공통 기능을 제공하는 Aspect 구현 클래스를 만들고 자바 설정을 이용해서
Aspect를 어디에 적용할지 설정하면 된다.
* 프록시는 스프링 프레임워크가 알아서 만들어준다.

## 3 프록시 생성 방식

---
* 스프링은 AOP를 위한 프록시 객체를 생성할 때 실제 생성할 빈 객체가 인터페이스를 
상속하면 인터페이스를 이용해서 프록시를 생성한다.
* 빈 객체가 인터페이스를 상속할 때 인터페이스가 아닌 클래스를 이용해서 프록시를 생
성하고 싶다면 다음과 같이 설정하면 된다.
  ```
  @Configuration
  @EnableAspectAutoProxy(proxyTargetClass = true)
  ```
* 인터페이스가 아닌 자바 클래스를 상속받아 프록시를 생성한다.
* 스프링이 프록시를 이용해서 생성한 빈 객체를 구할 때 getBean() 메서드에 실제
클래스를 이용해서 빈 객체를 구할 수 있게 된다.

