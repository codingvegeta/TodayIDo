# MVC 1: 요청 매핑, 커맨드 객체, 리다이렉트, 폼 태그, 모델

---
* 스프링 MVC를 사용해서 웹 어플리케이션을 개발한다는 것은 결국 컨트롤러와 뷰
코드를 구현한다는 것을 뜻한다.

##  요청 매핑 애노테이션을 이용한 경로 매핑

---
* 웹 어플리케이션을 개발하는 것은 다음 코드를 작성하는 것이다.
  * 특정 요청 URL을 처리할 코드
  * 처리 결과를 HTML과 같은 형식으로 응답하는 코드
* 이중 첫번째는 @Controller 애노테이션을 사용한 컨트롤러 클래스를 이용해서 구현한다.
* 컨트롤러 클래스는 요청 매핑 애노테이션을 사용해서 메서드가 처리할 요청 경로를 지정한다.
* 요청 매핑 애노테이션을 적용한 메서드를 두 개 이상 정의할 수도 있다.
* 여러 단계를 거쳐 하나의 기능이 완성되는 경우 관련 요청 경로를 한 개의 컨트롤러 클래스
에서 처리하면 코드 관리에 도움이 된다.
* 스프링 MVC는 클래스에 적용한 요청 매핑 애노테이션의 경로와 메서드에 적용한 요청 매핑
애노테이션의 경로를 합쳐서 경로를 찾는다.

##  GET과 POST 구분: @GetMapping @PostMapping

---
* 스프링 MVC는 별도 설정이 없으면 GET과 POST 방식에 상관없이 @RequestMapping에 지정한 경로와
일치하는 요청을 처리한다.
* 같은 경로에 대해 GET과 POST가 각각 다른 메서드가 처리하도록 설정할 수 있다.

##  요청 파라미터 접근

---
* 컨트롤러 메서드에서 요청 파라미터를 사용하는 첫 번째 방법은 HttpServletRequest를 직접 이용하는 것이다.
  * 컨트롤러 처리 메서드의 파라미터로 HttpServletRequest 타입을 사용하고 HttpServletRequest
  의 getParameter() 메서드를 이용해서 파라미터의 값을 구하면 된다.
* @RequestParam 애노테이션을 사용할 수도 있다.
  * 요청 파라미터 개수가 몇개 안 되면 이 애노테이션을 사용해서 간단하게 요청 파라미터의 값을 구할 수
  있다.
  * 속성 = vlaue 타입 = String 설명 = HTTP 요청 파라미터의 이름을 지정한다.
  * 속성 = required 타입 = boolean 설명 = 필수 여부를 지정한다. 이 값이 true이면서 해당 요청 파라미터에
  값이 없으면 익셉션이 발생한다. 기본값은 true다.
  * 속성 = defaultValue 타입 = String 설명 = 요청 파라미터가 값이 없을 때 사용할 문자열 값을 지정한다.
* 스프링 MVC는 파라미터 타입에 맞게 String 값을 변환해 준다.

##  리다이렉트 처리

---
* POST방식만을 처리하게 만들면 직접 주소를 입력할 때 사용되는 GET 방식은 처리하지 않고 에러화면
이 출력된다.
* 잘못된 전송 방식으로 요청이 왔을 때 에러 화면보다 알맞은 경로로 리다이렉트하는 것이 더 좋을
때가 있다.
* 특정 페이지로 리다이렉트시키는 방법은 간단하다. "redirect:경로"를 뷰 이름으로 리턴하면 된다.
* @RequestMapping, @GetMapping 등 요청 매핑 관련 애노테이션을 적용한 메서드가 "redirect:"
로 시작하는 경로를 리턴하면 나머지 경로를 이용해서 리다이렉트할 경로를 구한다.
* 뒤의 문자열이 "/"로 시작하면 웹 어플리케이션을 기준을 이동경로를 생성한다.
* "/"로 시작하지 않으면 현재 경로를 기준으로 상대 경로를 사용한다.

##  커맨드 객체를 이용해서 요청 파라미터 사용하기

---
* 스프링은 파라미터의 값이 너무 많아지는 불편함을 줄이기 위해 요청 파라미터의 값을 커맨드
객체에 담아주는 기능을 제공한다.
* 커맨드 객체라고 해서 특별한 코드를 작성해야 하는것은 아니다.
* 요청 파라미터의 값을 전달 받을 수 있는 세터 메서드를 포함하는 객체를 커맨드 객체로 사용하면 된다.
* 즉 스프링 MVC가 핸들러 메서드에 전달할 객체를 생성하고 객체의 세터 메서드를 이용해서 일치하는
요청 파라미터의 값을 전달한다.


## @ModelAttribute 애노테이션으로 커맨드 객체 속성 이름 변경

---
* 커맨드 객체에 접근할 때 사용할 속성 이름을 변경하고 싶다면 커맨드 객체로 사용할 파
라미터에 @ModelAttribute 애노테이션을 적용하면 된다.
* @ModelAttribute 애노테이션은 모델에서 사용할 속성 이름을 값으로 설정한다.
* 위 설정을 사용하면 뷰 코드에서 설정한 이름으로 커맨드 객체에 접근할 수 있다.
* 커맨드 객체의 기본값은 커맨드 객체의(첫 글자를 소문자로 바꾼) 클래스 이름과 동일한
속성 이름을 사용한다.

## 컨트롤러 구현 없는 경로 매핑

---
* 단순 연결을 위해 특별한 로직이 없는 컨트롤러 클래스를 만들지 말고 WebMvcController 인터
페이스의 addViewController() 메서드를 재정의해서 사용하자


## 커맨드 객체: 중첩 콜렉션 프로퍼티

---
* 스프링 MVC는 커맨드 객체가 리스트 타입의 프로퍼티를 가졌거나 중첩 프로퍼티를 가진 경우에도
요청 파라미터의 값을 알맞게 커맨드 객체에 설정해주는 기능을 제공하고 있다.
  * HTTP 요청 파라미터 이름이 "프로퍼티이름[인덱스]"형식이면 List 타입 프로퍼티의 값 목록으로
  처리한다.
  * HTTP 요청 파라미터 이름이 "프로퍼티이름.프로퍼티이름"과 같은 형석이면 중첩 프로퍼티
  값을 처리한다.

## Model을 통해 컨트롤러에서 뷰에 데이터 전달하기

---
* 컨트롤러는 뷰가 응답 화면을 구성하는데 필요한 데이터를 생성해서 전달해야 한다.
* 이때 사용하는것이 Model이다. 뷰에 데이터를 전달하는 컨트롤러는 다음 두가지를 하면 된다.
  * 요청 매핑 애노테이션이 적용된 메서드의 파라미터로 Model을 추가
  * Model 파라미터의 addAttribute() 메서드로 뷰에서 사용할 데이터 전달
* addAttribute() 메서드의 첫 번째 파라미터는 속성 이름이다.
  * 뷰 코드는 이 이름을 사용해서 데이터에 접근한다.

### ModelAndView를 통한 뷰 선택과 모델 전달

---
* ModelAndView를 사용하면 다음 두가지를 한번에 처리할 수 있다.
  * Model을 이용해서 뷰에 전달할 데이터 설정
  * 결과를 보여줄 뷰 이름을 리턴
* 요청 매핑 애노테이션을 적용한 메서드는 String 타입 대신 ModelAndView를 리턴할 수 있다.
* ModelAndView는 모델과 뷰 이름을 함께 제공한다.

