# 빈 라이프 사이클과 범위

---
## 1 컨테이너 초기화와 종료

---
* 스프링 컨테이너는 초기화와 종료라는 라이프사이클을 갖는다.
* 스프링은 생성자를 이용해서 객체를 생성하는데 이 시점에 스프링 컨테이너를 초기화한다.
* 스프링 컨테이너는 설정 클래스에서 정보를 읽어와 알맞은 빈 객체를 생성하고 각 빈을
연결(의존 주입)하는 작업을 수행한다.
* 컨테이너 초기화가 완료되면 컨테이너를 사용할 수 있다.
* 컨테이너에 보관된 빈 객체를 구할수 있다는것을 의미한다.
* 컨테이너 사용이 끝나면 컨테이너를 종료한다.
* 컨테이너를 종료할 때 사용하는 메서드가 close() 메서드이다.
* close() 메서드는 AbstractApplicationContext 클래스에 정의되어 있다.
* 컨테이너를 초기화하고 종료 할 때에는 다음의 작업도 함께 수행한다.
  * 컨테이너 초기화 -> 빈 객체의 생성, 의존 주입, 초기화
  * 컨테이너 종료 -> 빈 객체의 소멸

## 2 스프링 빈 객체의 라이프사이클

---
* 스프링 컨테이너는 빈 객체의 라이프사이클을 관리한다.
  * 객체생성 -> 의존 설정 -> 초기화 -> 소멸
* 스프링 컨테이너를 초기화 할 때 컨테이너는 가장 먼저 빈 객체를 생성하고 의존을
설정한다.
* 의존 자동 주입을 통한 의존 설정이 이 시점에 수행된다.
* 모든 의존 설정이 완료되면 빈 객체의 초기화를 수행한다.
* 빈 객체를 초기화 하기 위해 스프링은 빈 객체의 지정된 메서드를 호출한다.

### 2.1 빈 객체의 초기화와 소명 : 스프링 인터페이스

---
* 스프링 컨테이너는 빈 객체를 초기화하고 소멸하기 위해 빈 객체의 지정한 메서드를 호출
한다.
  * org.springframework.beans.factory.InitializingBean
  * org.springframework.beans.factory.DisposableBean
```
  public interface InitializingBean{
    void afterPropertiesSet() throws Exception
  }
  
  public interface DispoableBean{
    void destroy() throws Exception
  }  
```
* 초기화와 소멸 과정에서 필요한 메서드를 알맞게 구현하면 된다.
* 스프링 컨테이너는 빈 객체 생성을 마무리한 뒤에 초기화 메서드를 실행한다.
* 가장 마지막에 destroy() 메서드를 실행한다.

### 2.2 빈 객체의 초기화와 소멸 : 커스텀 메서드

---
* 모든 클래스가 InitializingBean, DisposableBean 인터페이스를 상속받아 구현할
수 있는 것은 아니다.
* 직접 구현한 클래스가 아닌 외부에서 제공받은 클래스를 스프링 빈 객체로 설정하고
싶을 때도 있다.
* 두 인터페이스를 구현할 수 없거나 사용하고 싶지 않은 경우에는 스프링 설정에서 직접 
메서드를 지정할 수 있다.
* @Bean(initMethod = "메서드",destroyMethod = "메서드") 로 초기화와 소멸
과정에서 사용할 메서드를 지정해 줄 수 있다.
* 초기화 관련 메서드를 빈 설정 코드에서 직접 실핼할 때는 초기화 메서드가 두 번
호출되지 않도록 주의해야 한다.

## 3 빈 객체의 생성과 관리 범위

---
* 한 식별자에 대해 한 개의 객체만 존재하는 빈은 싱글톤 범위를 갖는다.
* 빈의 범위를 프로토타입으로 지정하면 빈 객체를 구할 때마다 매번 새로운 객체를 생성
한다.
* 특정 빈을 프로토타입 범위로 지정하려면 다음과 같이 값으로 "prototype"을 갖는
@Scope 애노테이션을 @Bean 애노테이셔과 함께 사용하면 된다.
* 싱글톤 범위를 명시적으로 지정하고 싶다면 @Scope 애노테이션 값으로 "singleton"을
주면 된다.
* 프로토타입 범위를 갖는 빈은 완전한 라이프사이클을 따르지 않는다는 점에 주의해야 한다.
* 스프링 컨테이너는 빈 객체를 생성하고 프로퍼티를 설정하고 초기화 작업까지는 수행하지만,
컨테이너를 종료한다고 해서 생성한 프로토타입 빈 객체의 소멸 메서드는 실행하지는 않는다.
* 프로토타입 범위의 빈을 사용할 때에는 빈 객체의 소멸 처리를 코드에서 직접 해야한다.
* 